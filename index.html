<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<title>Flashcards</title>
<meta name="viewport" content="width=device-width,initial-scale=1">

<style>
:root{
  --orange-1: #ff9f1c;
  --orange-2: #ff6b35;
  --bg-a: #a8edea;
  --bg-b: #fed6e3;
  --card-shadow: 0 8px 20px rgba(16,24,40,0.12);
}

html,body{
  height:100%; margin:0; font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  color:#222; background: linear-gradient(90deg,var(--bg-a),var(--bg-b));
  -webkit-font-smoothing:antialiased;
}
main{flex:1;}

/* ============================ Bandeau Hero ============================ */
.hero{ background: linear-gradient(90deg,var(--orange-1),var(--orange-2));
  color:white; padding:28px 20px 56px 20px; position:relative; overflow:visible;
  box-shadow:0 6px 20px rgba(0,0,0,0.08);
}
.hero-inner{ max-width:1200px; margin:0 auto; display:flex; align-items:center; justify-content:space-between; gap:12px; }
.hero-left{ display:flex; flex-direction:column; gap:6px; }
.hero-left .small{ font-size:14px; opacity:0.95; letter-spacing:0.6px; }
.hero-left h1{ margin:0; font-size:34px; line-height:1; font-weight:700; letter-spacing:-0.6px; text-shadow:0 2px 10px rgba(0,0,0,0.08);}
.hero .create-btn{ background: rgba(255,255,255,0.98); color: var(--orange-2); border:none; padding:10px 16px; border-radius:999px; font-weight:700; cursor:pointer; box-shadow:0 6px 18px rgba(0,0,0,0.12); transition: transform .14s ease; margin-left:6px; }
.hero .create-btn:hover{ transform:translateY(-3px); }

/* Mini-cartes illustratives du Hero */
.hero-art{ position:absolute; left:50%; transform:translateX(-50%); bottom:-28px; display:flex; gap:-28px; pointer-events:none; }
.mini-card{ width:120px; height:72px; border-radius:12px; box-shadow:var(--card-shadow); display:flex; flex-direction:column; justify-content:center; align-items:center; font-weight:600; color:#333; transform-origin:center; border:1px solid rgba(0,0,0,0.04);}
.mini-card:nth-child(1){ transform:rotate(-8deg) translateX(-20px); background: linear-gradient(180deg,#ffffff,#fff3f0);}
.mini-card:nth-child(2){ transform:rotate(2deg); z-index:2; background: linear-gradient(180deg,#ffffff,#eefcff);}
.mini-card:nth-child(3){ transform:rotate(8deg) translateX(20px); background: linear-gradient(180deg,#fffef6,#fff9e6);}
.mini-card .q{ font-size:14px; opacity:0.9; }
.mini-card .a{ font-size:11px; opacity:0.65; margin-top:6px; }

/* ============================ Grille des niveaux ============================ */
.container{ max-width:1200px; margin:60px auto 40px; padding:0 18px; }
.levels{ display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:18px; }
.level-card{ background:white; border-radius:16px; padding:20px; display:flex; gap:12px; align-items:center; box-shadow: var(--card-shadow); cursor:pointer; transition: transform .16s ease, box-shadow .16s ease; border:1px solid rgba(0,0,0,0.03);}
.level-card:hover{ transform: translateY(-6px); box-shadow:0 14px 30px rgba(16,24,40,0.12);}
.icon-square{ width:72px; height:72px; border-radius:12px; display:flex; align-items:center; justify-content:center; flex-shrink:0; box-shadow:0 6px 18px rgba(0,0,0,0.06); color:white; font-size:28px;}
.icon-blue{ background: linear-gradient(180deg,#4e73df,#6c8cff); }
.icon-teal{ background: linear-gradient(180deg,#06b6d4,#3dd6e9);}
.icon-green{ background: linear-gradient(180deg,#16a34a,#4ade80);}
.icon-amber{ background: linear-gradient(180deg,#f59e0b,#fbbf24);}
.level-body h3{ margin:0; font-size:18px; }
.level-body p{ margin:6px 0 0; font-size:13px; color:#666; }

/* ============================ Section cr√©ation cartes ============================ */
#createSection{ display:none; max-width:980px; margin:26px auto; border-radius:14px; padding:18px; background:transparent; }
textarea{ width:100%; min-height:90px; padding:10px; border-radius:10px; border:1px solid #e6e6e9; resize:vertical; font-size:14px; }
input[type=file]{ display:block; }
.muted{ color:#666; font-size:13px; margin-top:8px; }
.controls{ display:flex; gap:8px; margin-top:10px; align-items:center; }
.btn{ padding:8px 12px; border-radius:10px; border:none; cursor:pointer; font-weight:700; }
.btn-add{ background: linear-gradient(90deg,var(--orange-1),var(--orange-2)); color:white; }
.btn-secondary{ background:#f3f4f6; color:#111; }

/* ============================ Flashcards ============================ */
.flashcard{ width:220px; height:140px; perspective:1000px; cursor:pointer; }
.flashcard-inner{ width:100%; height:100%; position:relative; transition: transform .6s; transform-style:preserve-3d; }
.flashcard.flipped .flashcard-inner{ transform: rotateY(180deg); }
.front, .back { position:absolute; inset:0; border-radius:12px; backface-visibility:hidden; display:flex; align-items:center; justify-content:center; text-align:center; padding:12px; font-weight:600; box-shadow:0 6px 14px rgba(0,0,0,0.08);}
.front{ background: linear-gradient(180deg,#ffffff,#fff7ef); color:#222; }
.back{ background: linear-gradient(180deg,#eef7ff,#e6f0ff); color:#222; transform: rotateY(180deg); }

/* ============================ R√©vision ============================ */
#reviseOverlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.85);
  display: none;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  z-index: 2000;
  color: white;
}
#reviseOverlay .flashcard {
  width: 360px;
  height: 220px;
  margin: auto;
}
#reviseControls {
  margin-top: 18px;
  display: flex;
  gap: 14px;
}
#reviseControls button {
  padding: 8px 14px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  font-weight: 700;
  font-size: 15px;
}
#reviseControls .correct { background: #4caf50; color:white; }
#reviseControls .incorrect { background: #f44336; color:white; }
#reviseCounter {
  margin-top: 12px;
  font-size: 15px;
}
#closeRevise {
  position:absolute;
  top:12px;
  right:20px;
  font-size:20px;
  cursor:pointer;
}
</style>
</head>

<body>
<header class="hero">
  <div class="hero-inner">
    <div class="hero-left">
      <div class="small">Les cartes</div>
      <h1>Flashcards</h1>
    </div>
    <div>
      <button class="create-btn" onclick="showLevels()">üìö √âtudier</button>
      <button class="create-btn" onclick="toggleCreate()">‚úèÔ∏è Cr√©er</button>
    </div>
  </div>
</header>

<main class="container">
  <section id="createSection">
    <h2>Cr√©er une nouvelle carte</h2>
    <label class="muted">Recto</label>
    <textarea id="frontText"></textarea>
    <input id="frontImg" type="file" accept="image/*">

    <label class="muted">Verso</label>
    <textarea id="backText"></textarea>
    <input id="backImg" type="file" accept="image/*">

    <div class="controls">
      <button class="btn btn-add" id="addCardBtn">Ajouter</button>
      <button class="btn btn-add" id="reviseBtn">R√©viser</button>
    </div>
    <div id="cardsList"></div>
  </section>
</main>

<!-- Overlay de r√©vision -->
<div id="reviseOverlay">
  <div id="closeRevise">‚úï</div>
  <div id="reviseCardContainer"></div>
  <div id="reviseControls">
    <button class="correct">Correct</button>
    <button class="incorrect">Incorrect</button>
  </div>
  <div id="reviseCounter"></div>
</div>

<script>
let deck = [];

/* Utilitaire */
function escapeHtml(s){ return String(s).replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;').replaceAll('\n','<br>'); }

/* Ajouter une carte */
async function addCard(){
  const fTxt=document.getElementById('frontText').value.trim();
  const bTxt=document.getElementById('backText').value.trim();
  if(!fTxt && !bTxt){ alert("Ajoute du contenu"); return; }
  deck.push({front:fTxt, back:bTxt});
  renderCardsPreview();
  document.getElementById('frontText').value='';
  document.getElementById('backText').value='';
}

/* Affichage preview */
function renderCardsPreview(){
  const list=document.getElementById('cardsList'); list.innerHTML='';
  deck.forEach((c,idx)=>{
    const wrap=document.createElement('div'); wrap.className='flashcard';
    wrap.innerHTML=`<div class="flashcard-inner">
      <div class="front">${escapeHtml(c.front)}</div>
      <div class="back">${escapeHtml(c.back)}</div>
    </div>`;
    wrap.addEventListener('click',()=>wrap.classList.toggle('flipped'));
    list.appendChild(wrap);
  });
}

/* R√©vision */
document.getElementById('reviseBtn').addEventListener('click', ()=>{
  if(deck.length===0){ alert("Pas de cartes !"); return; }
  let cards=[...deck];
  cards.sort(()=>Math.random()-0.5); // m√©lange
  let idx=0, correct=0, incorrect=0;

  const overlay=document.getElementById('reviseOverlay');
  overlay.style.display='flex';
  const container=document.getElementById('reviseCardContainer');
  const counter=document.getElementById('reviseCounter');

  function showCard(i){
    const c=cards[i];
    container.innerHTML=`
      <div class="flashcard">
        <div class="flashcard-inner">
          <div class="front">${escapeHtml(c.front)}</div>
          <div class="back">${escapeHtml(c.back)}</div>
        </div>
      </div>`;
    const flash=container.querySelector('.flashcard');
    flash.addEventListener('click',()=>flash.classList.toggle('flipped'));
    counter.textContent=`Correctes: ${correct} | Incorrectes: ${incorrect} | Restantes: ${cards.length-i}`;
  }

  showCard(idx);

  overlay.querySelector('.correct').onclick=()=>{
    correct++; idx++;
    if(idx>=cards.length){ finish(); } else showCard(idx);
  };
  overlay.querySelector('.incorrect').onclick=()=>{
    incorrect++; idx++;
    if(idx>=cards.length){ finish(); } else showCard(idx);
  };

  function finish(){
    counter.textContent=`Fini ! ‚úÖ Correctes: ${correct}, ‚ùå Incorrectes: ${incorrect}`;
  }

  document.getElementById('closeRevise').onclick=()=>{ overlay.style.display='none'; };
});

document.getElementById('addCardBtn').addEventListener('click', addCard);
</script>
</body>
</html>

