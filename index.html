<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<title>Flashcards</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body{font-family:sans-serif;margin:0;}
.container{max-width:1200px;margin:20px auto;padding:0 18px;}
.levels{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:18px;}
.level-card{background:white;border-radius:12px;padding:20px;box-shadow:0 4px 10px rgba(0,0,0,0.1);cursor:pointer;text-align:center;}
.flashcard{width:220px;height:140px;perspective:1000px;cursor:pointer;display:inline-block;margin:8px;}
.flashcard-inner{width:100%;height:100%;position:relative;transition:transform .6s;transform-style:preserve-3d;}
.flashcard.flipped .flashcard-inner{transform:rotateY(180deg);}
.front,.back{position:absolute;inset:0;border-radius:12px;backface-visibility:hidden;
display:flex;align-items:center;justify-content:center;padding:12px;font-weight:600;
box-shadow:0 4px 10px rgba(0,0,0,0.1);}
.front{background:#fff7ef;color:#222;}
.back{background:#e6f0ff;color:#222;transform:rotateY(180deg);}
button{padding:8px 14px;border:none;border-radius:8px;font-weight:600;cursor:pointer;margin-top:10px;}
.start-btn{background:#16a34a;color:white;}
#progress{margin-top:12px;font-weight:600;}
</style>
</head>
<body>

<main class="container">
 <!-- Niveaux -->
 <section id="levelsSection">
  <div class="levels">
   <article class="level-card" onclick="openModal('Seconde')"><h3>Seconde</h3></article>
   <article class="level-card" onclick="openModal('Premi√®re')"><h3>Premi√®re</h3></article>
   <article class="level-card" onclick="openModal('Terminale')"><h3>Terminale</h3></article>
  </div>
 </section>

 <!-- Etudier -->
 <section id="studySection" style="display:none;">
  <h2 id="studyTitle"></h2>
  <button class="start-btn" onclick="startCards()">‚ñ∂Ô∏è Commencer la r√©vision</button>
  <div id="progress"></div>
  <div id="studyCards" style="margin-top:20px;"></div>
  <button onclick="backToLevels()" style="margin-top:20px;">‚¨ÖÔ∏è Retour</button>
 </section>
</main>

<!-- Modal choix de chapitre -->
<div class="modal" id="chapterModal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.5);align-items:center;justify-content:center;">
 <div style="background:white;padding:20px;border-radius:12px;min-width:250px;">
  <h2 id="modalTitle"></h2>
  <ul id="chapterList" style="list-style:none;padding:0;"></ul>
  <button class="start-btn" onclick="startRevision()">Commencer</button>
  <button onclick="closeModal()">Fermer</button>
 </div>
</div>

<script>
// --- Chapitres disponibles ---
const chapters = {
 "Seconde":["Chapitre 1 : Bases","Chapitre 2 : Fonctions"],
 "Premi√®re":["Chapitre 1 : Suites","Chapitre 2 : Probabilit√©s"],
 "Terminale":["Chapitre 1 : D√©riv√©es","Chapitre 2 : Int√©grales"]
};

// --- Jeux de cartes ---
const chapterDecks = {
 "Seconde Chapitre 1 : Bases":[
   { front:"f(x)=x¬≤", back:"f'(x)=2x" },
   { front:"(a+b)¬≤", back:"a¬≤ + 2ab + b¬≤" },
   { front:"sin¬≤Œ∏+cos¬≤Œ∏", back:"=1" }
 ]
};

let currentLevel=null;
let selectedChapter=null;
let deck=[];
let currentIndex=0;

// --- Ouvrir la fen√™tre des chapitres ---
function openModal(level){
 currentLevel=level;
 selectedChapter=null;
 const list=document.getElementById('chapterList');
 list.innerHTML='';
 (chapters[level]||[]).forEach(ch=>{
  const li=document.createElement('li');
  li.textContent=ch;
  li.style.padding="6px";
  li.style.cursor="pointer";
  li.onclick=()=>{selectedChapter=ch; Array.from(list.children).forEach(c=>c.style.background=""); li.style.background="#dfefff";};
  list.appendChild(li);
 });
 document.getElementById('modalTitle').textContent=level+" ‚Äî Chapitres";
 document.getElementById('chapterModal').style.display="flex";
}

function closeModal(){ document.getElementById('chapterModal').style.display="none"; }

// --- Lancer une r√©vision ---
function startRevision(){
 if(!selectedChapter){alert("Choisis un chapitre");return;}
 const key=currentLevel+" "+selectedChapter;
 deck=chapterDecks[key]||[];
 if(deck.length===0){alert("Pas de cartes pour ce chapitre");return;}
 closeModal();
 document.getElementById('levelsSection').style.display="none";
 document.getElementById('studySection').style.display="block";
 document.getElementById('studyTitle').textContent=currentLevel+" ‚Äî "+selectedChapter;
 document.getElementById('studyCards').innerHTML=""; 
 document.getElementById('progress').textContent="";
 currentIndex=0;
}

// --- Commencer les cartes ---
function startCards(){
 if(deck.length===0){alert("Aucune carte");return;}
 currentIndex=0;
 showCard(currentIndex);
 updateProgress();
}

// --- Afficher une carte ---
function showCard(i){
 const container=document.getElementById('studyCards');
 container.innerHTML="";
 const c=deck[i];
 const div=document.createElement('div');
 div.className="flashcard";
 div.innerHTML=`<div class="flashcard-inner">
   <div class="front">${c.front}</div>
   <div class="back">${c.back}</div>
 </div>`;
 div.onclick=()=>div.classList.toggle('flipped');
 container.appendChild(div);

 if(i<deck.length-1){
   const nextBtn=document.createElement('button');
   nextBtn.textContent="Suivant";
   nextBtn.className="start-btn";
   nextBtn.onclick=()=>{currentIndex++; showCard(currentIndex); updateProgress();};
   container.appendChild(nextBtn);
 } else {
   const endBtn=document.createElement('button');
   endBtn.textContent="Terminer";
   endBtn.className="start-btn";
   endBtn.onclick=()=>{celebrate();};
   container.appendChild(endBtn);
 }
}

// --- Mise √† jour progression ---
function updateProgress(){
 document.getElementById('progress').textContent=`Carte ${currentIndex+1}/${deck.length}`;
}

// --- Confettis ---
function celebrate(){
 const confetti=document.createElement('div');
 confetti.style.position='fixed';
 confetti.style.top=0;
 confetti.style.left=0;
 confetti.style.width='100%';
 confetti.style.height='100%';
 confetti.style.pointerEvents='none';
 confetti.style.zIndex=2000;
 document.body.appendChild(confetti);
 for(let i=0;i<100;i++){
   const c=document.createElement('div');
   c.style.position='absolute';
   c.style.width='8px';
   c.style.height='8px';
   c.style.background=`hsl(${Math.random()*360},100%,50%)`;
   c.style.left=Math.random()*window.innerWidth+'px';
   c.style.top=Math.random()*window.innerHeight+'px';
   c.style.opacity=1;
   c.style.borderRadius='50%';
   c.style.transition='transform 3s ease, top 3s ease, opacity 3s ease';
   confetti.appendChild(c);
   setTimeout(()=>{
     c.style.top=window.innerHeight+'px';
     c.style.opacity=0;
   },10);
 }
 setTimeout(()=>{document.body.removeChild(confetti);alert("Bravo üéâ Tu as fini la r√©vision !");},3000);
}

// --- Retour aux niveaux ---
function backToLevels(){
 document.getElementById('studySection').style.display="none";
 document.getElementById('levelsSection').style.display="block";
}
</script>
</body>
</html>
